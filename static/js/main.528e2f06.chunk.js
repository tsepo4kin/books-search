(this["webpackJsonpbooks-search"]=this["webpackJsonpbooks-search"]||[]).push([[0],{15:function(e,t,o){},16:function(e,t,o){},22:function(e,t,o){"use strict";o.r(t);var n=o(1),c=o.n(n),s=o(6),a=o.n(s),i=(o(15),o(4)),r=(o(16),"LOAD_MORE_BOOKS"),l="SEARCH_BOOKS",u="SET_SEARCH_PARAMS",b="TOGGLE_SEARCH_LOADER",j="TOGGLE_PAGINATION_LOADER",d="SET_BOOKS_COUNT",h=function(e){return function(t){t(v()),t(p(e)),fetch('https://www.googleapis.com/books/v1/volumes?q=intitle:"'.concat(e.inputValue,'"').concat("all"!==e.categoriesValue?"+subject:"+e.categoriesValue:"","&maxResults=30&orderBy=").concat(e.sortingValue,"&printType=books&projection=full&key=").concat("AIzaSyDqSD1ikizFCnZNTB4eEtf_udpdHc_ZpDs")).then((function(e){return e.json()})).then((function(e){var o,n;e.items?(e.items=e.items.filter((function(e){return e.volumeInfo})),t((n=e.totalItems,{type:d,payload:{booksCount:n}})),e.items=e.items.filter((function(e){return e.volumeInfo})),t((o=e.items,{type:l,payload:{books:o}})),t(v())):(console.log("result without books"),t(v()))})).catch((function(e){console.log(e)}))}},m=function(e){return{type:r,payload:{books:e}}},O=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;return function(n){n(g()),fetch('https://www.googleapis.com/books/v1/volumes?q=intitle:"'.concat(t.inputValue,'"').concat("all"!==t.categoriesValue?"+subject:"+t.categoriesValue:"","&startIndex=").concat(e,"&maxResults=").concat(o,"&orderBy=").concat(t.sortingValue,"&projection=full&printType=books&projection=full&key=").concat("AIzaSyDqSD1ikizFCnZNTB4eEtf_udpdHc_ZpDs")).then((function(e){return e.json()})).then((function(e){e.items?(e.items=e.items.filter((function(e){return e.volumeInfo})),n(m(e.items)),n(g())):(console.log("result without books"),n(g()))})).catch((function(e){console.log(e)}))}},p=function(e){return{type:u,payload:{searchParams:e}}},v=function(){return{type:b}},g=function(){return{type:j}},k=o(3),f=o(0);function x(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),o=t[0],c=t[1],s=Object(n.useState)("all"),a=Object(i.a)(s,2),r=a[0],l=a[1],u=Object(n.useState)("relevance"),b=Object(i.a)(u,2),j=b[0],d=b[1],m=Object(k.b)();return Object(f.jsxs)("header",{className:"header",children:[Object(f.jsx)("h1",{className:"header__title",children:"Search for books"}),Object(f.jsx)("input",{className:"header__input",value:o,onChange:function(e){c(e.target.value)},type:"text"}),Object(f.jsx)("button",{className:"header__search",onClick:function(){o.trim()&&m(h({inputValue:o,categoriesValue:r,sortingValue:j}))},children:"Search"}),Object(f.jsxs)("div",{className:"select-wrapper",children:[Object(f.jsxs)("label",{htmlFor:"categories",className:"categories-label",children:[" ","Categories"," "]}),Object(f.jsxs)("select",{className:"header__select__categories",size:"1",id:"categories",value:r,onChange:function(e){l(e.target.value)},children:[Object(f.jsx)("option",{value:"all",children:"all"}),Object(f.jsx)("option",{value:"art",children:"art"}),Object(f.jsx)("option",{value:"biography",children:"biography"}),Object(f.jsx)("option",{value:"computers",children:"computers"}),Object(f.jsx)("option",{value:"history",children:"history"}),Object(f.jsx)("option",{value:"medical",children:"medical"}),Object(f.jsx)("option",{value:"poetry",children:"poetry"})]}),Object(f.jsxs)("label",{htmlFor:"sorting",className:"sorting-label",children:[" ","Sorting"," "]}),Object(f.jsxs)("select",{className:"header__select__sorting",size:"1",name:"",id:"sorting",value:j,onChange:function(e){d(e.target.value)},children:[Object(f.jsx)("option",{value:"relevance",children:"relevance"}),Object(f.jsx)("option",{value:"newest",children:"newest"})]})]})]})}function _(e){var t,o,n,c=e.book,s=e.openBookDescription;return Object(f.jsxs)("div",{className:"book-card",onClick:function(){s(c)},children:[Object(f.jsx)("img",{className:"book-card__img",src:c.volumeInfo.imageLinks?c.volumeInfo.imageLinks.thumbnail:"#",alt:"book"}),Object(f.jsx)("p",{className:"book-card__categories",children:null===(t=c.volumeInfo)||void 0===t?void 0:t.categories}),Object(f.jsx)("h5",{className:"book-card__title",children:null===(o=c.volumeInfo)||void 0===o?void 0:o.title}),Object(f.jsx)("p",{className:"book-card__authors",children:null===(n=c.volumeInfo)||void 0===n?void 0:n.authors})]})}function y(){return Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"20px 0"},children:Object(f.jsxs)("div",{className:"lds-roller",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})})}function N(e){var t=e.bookData,o=Object(k.c)((function(e){return e.books})),n=Object(k.c)((function(e){return e.searchParams})),c=Object(k.c)((function(e){return e.loading.paginationLoader})),s=Object(k.b)();return Object(f.jsx)("main",{children:!!o.booksCount&&Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("p",{className:"books-counter",children:["Found ",o.booksCount," results"]}),o.booksItems.map((function(e,o){return Object(f.jsx)(_,{book:e,openBookDescription:t},o)})),Object(f.jsx)("div",{className:"btn-wrapper",children:c?Object(f.jsx)(y,{}):Object(f.jsx)("button",{onClick:function(){o.booksCount-o.booksItems.length<=0?console.log("all books"):o.booksCount-o.booksItems.length>=30?s(O(o.booksItems.length,n)):o.booksCount-o.booksItems.length<30&&s(O(o.booksItems.length,n,o.booksCount-o.booksItems.length))},className:"add-more-btn",children:"Add more"})})]})})}function I(e){var t=e.book,o=e.closeShowBook;return Object(f.jsxs)("div",{className:"book-item-wrapper",children:[Object(f.jsx)("div",{className:"book-item__img__wrapper",children:Object(f.jsx)("img",{className:"book-item__img",src:t.volumeInfo.imageLinks.thumbnail,alt:""})}),Object(f.jsxs)("div",{className:"book-item-description-wrapper",children:[Object(f.jsx)("p",{className:"book-item__breadcrumbs",children:Object(f.jsx)("span",{children:t.volumeInfo.categories})}),Object(f.jsx)("h2",{className:"book-item__title",children:t.volumeInfo.title}),Object(f.jsx)("p",{className:"book-item__authors",children:t.volumeInfo.authors}),Object(f.jsx)("p",{className:"book-item__description",children:t.volumeInfo.description})]}),Object(f.jsx)("button",{className:"book-item__button",onClick:o,children:"close"})]})}var C=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),o=t[0],c=t[1],s=Object(n.useState)(!1),a=Object(i.a)(s,2),r=a[0],l=a[1],u=Object(k.c)((function(e){return e.loading.searchLoader}));return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(x,{}),r&&Object(f.jsx)(I,{book:o,closeShowBook:function(){l(!1),c(!1)}}),u&&Object(f.jsx)(y,{}),!r&&!u&&Object(f.jsx)(N,{bookData:function(e){l(!0),c(e)}})]})},S=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,23)).then((function(t){var o=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;o(e),n(e),c(e),s(e),a(e)}))},w=o(5),L=o(2),V=Object(w.b)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{booksItems:[],booksCount:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(L.a)(Object(L.a)({},e),{},{booksItems:t.payload.books});case r:var o=e.booksItems.concat(t.payload.books);return Object(L.a)(Object(L.a)({},e),{},{booksItems:o});case d:return Object(L.a)(Object(L.a)({},e),{},{booksCount:t.payload.booksCount});default:return e}},searchParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===u){var o=t.payload.searchParams,n=o.inputValue,c=o.categoriesValue,s=o.sortingValue;return Object(L.a)(Object(L.a)({},e),{},{inputValue:n,categoriesValue:c,sortingValue:s})}return e},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{searchLoader:!1,paginationLoader:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(L.a)(Object(L.a)({},e),{},{searchLoader:!e.searchLoader});case j:return Object(L.a)(Object(L.a)({},e),{},{paginationLoader:!e.paginationLoader});default:return e}}}),A=o(10),D=Object(w.c)(V,Object(w.a)(A.a));a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(k.a,{store:D,children:Object(f.jsx)(C,{})})}),document.getElementById("root")),S()}},[[22,1,2]]]);
//# sourceMappingURL=main.528e2f06.chunk.js.map